{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>D·ª± √°n khoa h·ªçc k·ªπ thu·∫≠t</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8d9dd;
            text-align: center;
            font-family: Arial;
        }

        /* B√≥ hoa */
        #flower {
            width: 220px;
            margin-top: 40px;
            cursor: pointer;
            transition: 0.3s;
        }
        #flower:hover {
            transform: scale(1.07);
        }

        #hint {
            margin-top: 15px;
            font-size: 22px;
            color: #d26b84;
        }
        #msg {
            margin-top: 20px;
            font-size: 24px;
            color: #c45a7b;
            opacity: 0;
            transition: 0.5s;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        /* Tr√°i tim r∆°i */
        .heart {
            position: fixed;
            color: red;
            font-size: 25px;
            animation: fall 3s linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(-20px); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }

        /* Chatbot gi·ªØ nguy√™n */
        #chatbot-widget { position: fixed; bottom: 20px; right: 20px; width: 320px; z-index: 9999; }
        #chatbot-header { background:#0d6efd; color:white; padding:10px; border-radius:10px 10px 0 0; cursor:pointer; }
        #chatbot-box { display:none; background:white; border:1px solid #ddd; height:380px; border-radius:0 0 10px 10px; padding:10px; }
        #chatbot-messages { height:300px; overflow-y:auto; border-bottom:1px solid #ddd; padding-bottom:10px; }
        #chatbot-input { display:flex; }
        #chatbot-text { width:75%; padding:5px; }
        #chatbot-send { width:25%; background:#0d6efd; color:white; border:none; }
    </style>
</head>

<body>

    <!-- üéÅ B√ì HOA + L·ªúI CH√öC -->
    <img id="flower" src="{% static 'app/images/flower.png' %}">
    <div id="hint">Ch·∫°m v√†o b√≥ hoa</div>
    <div id="msg"></div>

    <!-- üîä Nh·∫°c -->
    <audio id="music">
        <source src="{% static 'app/music/20-11.mp3' %}">
    </audio>

    <!-- ‚ù§Ô∏è Hi·ªáu ·ª©ng tr√°i tim r∆°i -->
    <script>
    function createHeart() {
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML = "‚ù§Ô∏è";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(heart);

        setTimeout(() => heart.remove(), 3000);
    }
    </script>

    <!-- üéâ Script b√≥ hoa -->
    <script>
    document.getElementById("flower").addEventListener("click", function () {

        // L·ªùi ch√∫c
        const message =
            "K√≠nh g·ª≠i C√¥ Nhu ‚ù§Ô∏è<br><br>" +
            "Nh√¢n ng√†y Nh√† gi√°o Vi·ªát Nam 20/11, em xin g·ª≠i ƒë·∫øn c√¥ l·ªùi tri √¢n s√¢u s·∫Øc nh·∫•t. " +
            "C·∫£m ∆°n c√¥ v√¨ ƒë√£ lu√¥n t·∫≠n t√¢m, lu√¥n ƒë·ªìng h√†nh v√† truy·ªÅn c·∫£m h·ª©ng cho ch√∫ng em m·ªói ng√†y.<br><br>" +
            "Ch√∫c c√¥ lu√¥n m·∫°nh kh·ªèe, h·∫°nh ph√∫c v√† th√†nh c√¥ng. C√¥ m√£i l√† ng·ªçn ƒë√®n d·∫´n l·ªëi cho ch√∫ng em! ‚ù§Ô∏è";

        document.getElementById("msg").innerHTML = message;
        document.getElementById("msg").style.opacity = 1;
        document.getElementById("hint").style.display = "none";

        // Nh·∫°c ph√°t
        document.getElementById("music").play();

        // Hi·ªáu ·ª©ng ph√≥ng to hoa
        this.style.transform = "scale(1.2)";
        setTimeout(() => { this.style.transform = "scale(1)"; }, 300);

        // Tr√°i tim r∆°i li√™n t·ª•c
        setInterval(createHeart, 300);
    });
    </script>

    <!-- ‚≠ê NAVBAR (GI·ªÆ NGUY√äN) -->

    <!-- ‚≠ê MAIN (kh√¥ng d√πng block content n·ªØa) -->
    <main class="container py-4">
        {% block content %}{% endblock %}
    </main>


    <!-- ‚≠ê Chatbot gi·ªØ nguy√™n -->
    <div id="chatbot-widget">
        <div id="chatbot-header">Chat h·ªó tr·ª£ KHKT</div>
        <div id="chatbot-box">
            <div id="chatbot-messages"></div>
            <div id="chatbot-input">
                <input type="text" id="chatbot-text" placeholder="Nh·∫≠p tin nh·∫Øn...">
                <button id="chatbot-send">G·ª≠i</button>
            </div>
        </div>
    </div>

</body>
</html>